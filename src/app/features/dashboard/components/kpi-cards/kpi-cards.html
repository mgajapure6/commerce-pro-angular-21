<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
    @if (isLoading()) {
        <!-- Loading Skeletons -->
        @for (i of [1,2,3,4]; track i) {
        <div class="bg-white rounded-2xl p-6 border border-gray-100 shadow-sm">
            <div class="flex items-start justify-between mb-4">
                <div class="w-14 h-14 rounded-2xl bg-gray-200 animate-pulse"></div>
                <div class="w-16 h-6 rounded-full bg-gray-200 animate-pulse"></div>
            </div>
            <div class="w-24 h-4 bg-gray-200 rounded animate-pulse mb-1"></div>
            <div class="w-32 h-8 bg-gray-200 rounded animate-pulse mb-2"></div>
            <div class="w-28 h-3 bg-gray-200 rounded animate-pulse"></div>
        </div>
        }
    } @else {
        <!-- KPI Cards with Gradients -->
        @for (kpi of kpiCards(); track kpi.title) {
        <div class="relative overflow-hidden rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 group cursor-pointer transform hover:-translate-y-1"
             [class]="'bg-gradient-to-br ' + kpi.gradient">
            
            <!-- Background Pattern -->
            <div class="absolute inset-0">
                <div class="absolute -right-6 -top-6 w-32 h-32 rounded-full bg-white/20 blur-2xl"></div>
                <div class="absolute -left-6 -bottom-6 w-24 h-24 rounded-full bg-white/10 blur-xl"></div>
            </div>
            
            <!-- Content -->
            <div class="relative z-10">
                <!-- Header -->
                <div class="flex items-start justify-between mb-4">
                    <div class="w-14 h-14 rounded-2xl flex items-center justify-center bg-white/25 backdrop-blur-md border border-white/30 shadow-lg">
                        <i class="bi bi-{{kpi.icon}} text-2xl text-white drop-shadow-md"></i>
                    </div>
                    <span class="flex items-center gap-1 text-xs font-bold px-3 py-1.5 rounded-full bg-white/25 backdrop-blur-sm border border-white/30 text-white shadow-lg">
                        <i class="bi bi-{{kpi.growth >= 0 ? 'arrow-up-short' : 'arrow-down-short'}} text-sm"></i>
                        {{ kpi.growth > 0 ? '+' : '' }}{{ kpi.growth }}%
                    </span>
                </div>
                
                <!-- Value -->
                <div class="mb-3">
                    <p class="text-white/90 text-sm font-semibold mb-1 uppercase tracking-wide">{{ kpi.title }}</p>
                    <h3 class="text-3xl font-extrabold text-white tracking-tight drop-shadow-lg">{{ kpi.value }}</h3>
                </div>
                
                <!-- Footer -->
                <div class="flex items-center gap-2 pt-3 border-t border-white/30">
                    <span class="text-xs text-white/90 font-medium">vs {{ kpi.previous }} last month</span>
                    <i class="bi bi-arrow-right text-white text-xs ml-auto group-hover:translate-x-1 transition-transform"></i>
                </div>
            </div>
            
            <!-- Hover Glow Effect -->
            <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none">
                <div class="absolute inset-0 bg-gradient-to-t from-white/20 to-transparent"></div>
            </div>
        </div>
        }
    }
</div>
